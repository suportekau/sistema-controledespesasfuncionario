// ğŸ”¹ Exportar Firebase com logs e seguranÃ§a
async function exportarFirebase(event) {
  const botao = event.target;
  botao.disabled = true;
  botao.textContent = "â³ Exportando...";

  try {
    console.log("ğŸŸ¡ Conectando ao Firebase...");
    const rootRef = ref(db, "/");
    const snapshot = await get(rootRef);
    console.log("ğŸŸ¢ Snapshot recebido:", snapshot.exists());

    if (!snapshot.exists()) {
      toast("âš ï¸ Nenhum dado encontrado no Firebase.", "warn");
      return;
    }

    const dados = snapshot.val();
    console.log("ğŸ“¦ Dados:", dados);

    const dataAgora = new Date().toISOString().replace(/[:.]/g, "-");
    const blob = new Blob([JSON.stringify(dados, null, 2)], { type: "application/json" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = `backup_firebase_${dataAgora}.json`;
    a.click();
    URL.revokeObjectURL(url);

    toast("âœ… Backup exportado com sucesso!", "success");
  } catch (erro) {
    console.error("âŒ Erro ao exportar:", erro);
    toast("âŒ Erro ao exportar: " + erro.message, "error");
  } finally {
    botao.disabled = false;
    botao.textContent = "ğŸ“¤ Exportar Backup";
  }
}
